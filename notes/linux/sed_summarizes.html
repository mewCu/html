<html>
<head>
  <title>sed(简明教程总结)</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602498 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="670"/>
<h1>sed(简明教程总结)</h1>

<div>
<span><div><ul><li><div><a href="https://coolshell.cn/articles/9104.html">sed 简明教程 | | 酷 壳 - CoolShell</a></div></li><ul><li><div>pets.txt</div></li><ul><li><div>This is my cat</div></li><li><div>  my cat's name is betty</div></li><li><div>This is my dog</div></li><li><div>  my dog's name is frank</div></li><li><div>This is my fish</div></li><li><div>  my fish's name is george</div></li><li><div>This is my goat</div></li><li><div>  my goat's name is adam</div></li></ul><li><div>html.txt</div></li><ul><li><div>&lt;b&gt;This&lt;/b&gt; is what &lt;span style=&quot;text-decoration:underline;&quot;&gt;I&lt;/span&gt; meant. Understand?</div></li></ul><li><div>my.txt</div></li><ul><li><div>This is my cat, my cat's name is betty</div></li><li><div>This is my dog, my dog's name is frank</div></li><li><div>This is my fish, my fish's name is george</div></li><li><div>This is my goat, my goat's name is adam</div></li></ul><li><div>email.txt</div></li><ul><li><div>my email is <a href="mailto:710010358@qq.com">710010358@qq.com</a>, you can guess my QQ.</div></li></ul><li><div>t.txt</div></li><ul><li><div>one</div></li><li><div>two</div></li><li><div>three</div></li></ul></ul><li><div>sed &quot;s/my/Aopeng's/g&quot; a.txt</div></li><ul><li><div>s 表示替换 把字符my替换成Aopeng's</div></li><li><div>g 表示当前行所有的匹配结果</div></li><li><div>因为无法\'转义单引号,所以这里使用的是&quot;&quot;</div></li><li><div>此命令只输出打印,不会修改源文件</div></li></ul><li><div>sed <span style="color: rgb(255, 0, 0);">-i</span> &quot;s/my/Aopeng's/g&quot; a.txt</div></li><ul><li><div>这个操作会修改源文件</div></li></ul><li><div>sed &quot;s/my/Aopeng's/g&quot; a.txt &gt; hao_pets.txt</div></li><ul><li><div>输出重定向到hao_pets.txt文件</div></li></ul><li><div>sed &quot;s/^/#/g&quot; pets.txt</div></li><ul><li><div>在每句前面添加一个#</div></li></ul><li><div><span style="font-size: unset; color: unset; font-family: unset;">sed &quot;s/$/ --- /g&quot; pets.txt</span></div></li><ul><li><div>在每句后面添加 ---</div></li></ul><li><div>sed '3s/my/your/g' my.txt</div></li><ul><li><div>3代表第3行</div></li></ul><li><div>sed '3,6s/my/your/g' my.txt</div></li><ul><li><div>替换的范围是3到第6行</div></li></ul><li><div>sed 's/s/S/1' my.txt</div></li><ul><li><div>替换每一行的第一个s</div></li></ul><li><div>sed 's/s/S/2' my.txt</div></li><ul><li><div>替换每一行的第2个s</div></li></ul><li><div>sed 's/s/S/3g' my.txt</div></li><ul><li><div>替换第一行的第3个及以后的s</div></li></ul><li><div>sed '2s/s/S/3g' my.txt</div></li><ul><li><div>替换第2行的第3个及以后的s</div></li></ul><li><div>sed '3s/s/S/3' my.txt </div></li><ul><li><div>替换第3行的第3个s</div></li></ul><li><div>sed '1,3s/my/your/g; 3,$s/This/That/g' my.txt</div></li><ul><li><div>第一个模式把第一行到第三行的my替换成your，第二个则把第3行以后的This替换成了That,多个匹配用;分开</div></li></ul><li><div>sed <span style="color: rgb(255, 0, 0);">-e</span> 'command' -e 'command' my.txt</div></li><ul><li><div>-e参数后面接脚本表达式</div></li></ul><li><div>sed 's/my/[&amp;]/g' my.txt</div></li><ul><li><div>把my替换成[my],&amp;表示匹配字符</div></li></ul><li><div>sed 's/This is my \([^,]*\),.*is \(.*\)/\1:\2/g' my.txt</div></li><ul><li><div>()表示一个整体变量</div></li><li><div>用\1,\2,\3表示第几个变量</div></li><li><div>小括号需转义\(\)</div></li></ul><li><div>sed '<span style="color: rgb(255, 0, 0);">N</span>;s/my/your/g' pets.txt</div></li><ul><li><div>N表示把下一行纳入到当前行的匹配,就是把2行一起匹配</div></li><li><div>注意分隔符;</div></li></ul><li><div>sed '<span style="color: rgb(255, 0, 0);">N</span>;s/\n/,/' pets.txt</div></li><ul><li><div>相当于把pets里的内容转换为my.txt的内容格式,8行变成了4行</div></li></ul><li><div>sed '<span style="color: rgb(255, 0, 0);">N</span>;s/my//2' pets.txt</div></li><ul><li><div>两行两行的进行匹配,如果第一行和第二行都只有一个my,则是删除的第二行(第2个)的my</div></li><li><div>输出还是8行</div></li></ul><li><div>sed &quot;1 <span style="color: rgb(255, 0, 0);">a</span> This is my monkey, my monkey's name is wukong&quot; my.txt</div></li><ul><li><div>1 a 表示在第一行后面添加行内容</div></li></ul><li><div>sed &quot;$ a This is my monkey, my monkey's name is wukong&quot; my.txt</div></li><ul><li><div>$ a 表示在最后一行添加内容</div></li></ul><li><div>sed &quot;1 <span style="color: rgb(255, 0, 0);">i</span> This is my monkey, my monkey's name is wukong&quot; my.txt</div></li><ul><li><div>1 i 表示在第一行前面插入一行内容</div></li></ul><li><div>sed &quot;2 i This is my monkey, my monkey's name is wukong&quot; my.txt</div></li><ul><li><div>2 i 表示在第二行前面插入一行内容</div></li></ul><li><div>sed &quot;2 i This is my monkey, my monkey's name is wukong&quot; my.txt | sed &quot;/monkey/a my name is wukong&quot;</div></li><ul><li><div>/monkey/a 表示在匹配到monkey后追加一行</div></li></ul><li><div>sed &quot;/my/a ----&quot; my.txt</div></li><ul><li><div>表示在每一行都追加一行</div></li></ul><li><div>sed &quot;2 <span style="color: rgb(255, 0, 0);">c</span> This two line was replaced&quot; my.txt</div></li><ul><li><div>2 c 表示替换第二行内容</div></li></ul><li><div>sed &quot;/my/c you are replaced&quot; my.txt</div></li><ul><li><div>把每一行都替换了</div></li></ul><li><div>sed '2 <span style="color: rgb(255, 0, 0);">d</span>' my.txt</div></li><ul><li><div>把第二行删除</div></li></ul><li><div>sed '/my/d' my.txt</div></li><ul><li><div>删除每一行</div></li></ul><li><div>sed '/fish/p' my.txt</div></li><ul><li><div>打印匹配到fish的那一行,当然fish前面和后面的也会输出(fish那一行会连续出现2次)</div></li></ul><li><div>sed -n '/fish/p' my.txt</div></li><ul><li><div>只输出匹配到的fish行</div></li></ul><li><div>sed -n '/my/p' txt</div></li><ul><li><div>当然是输出所有行</div></li></ul><li><div>sed -n '/cat/,/fish/p' my.txt</div></li><ul><li><div>输出匹配到cat那一行到匹配到fish那一行(有3行)</div></li></ul><li><div>sed -n '1,/fish/p' my.txt</div></li><ul><li><div>输出第一行到匹配到fish的那一行(前3行)</div></li></ul><li><div><span style="color: rgb(255, 0, 0);">sed -n '$,/cat/p' my.txt</span></div></li><ul><li><div>貌似只输出最后一行</div></li></ul><li><div>sed '/dog/,+3s/^/# /g' pets.txt</div></li><ul><li><div>找到匹配到dog的那一行,向后再数3行,把开头替换成# 加不加g无所谓</div></li></ul><li><div>sed '3,6 {/This/d}' pets.txt</div></li><ul><li><div>3到6行,删除匹配到This的行</div></li></ul><li><div>sed '3,6 {/This/{/fish/d}}' pets.txt</div></li><ul><li><div>3到6行,删除匹配到This后又匹配到fish的行</div></li></ul><li><div>sed '1,$ {/This/d;s/^ //g}' pets.txt</div></li><li><div>sed '{/This/d;s/^ //}' pets.txt</div></li><ul><li><div>上两句效果一样</div></li><li><div>从第一行到最后一行,若匹配到This则删除该行,若开头有空格就去掉空格</div></li></ul><li><div><span style="color: rgb(255, 0, 0);">sed '{/^[^ ]/s/^/#/}' pets.txt</span></div></li><ul><li><div>若开头没有空格则在开头添加一个#</div></li></ul><li><div><span style="color: rgb(255, 0, 0);">sed '{/^ /s/^/#/}' pets.txt</span></div></li><ul><li><div>若开头是空格就在开头加#</div></li></ul><li><div><span style="color: rgb(255, 0, 0);">sed '{/This/{/is/{/my/s/^[^my]*my //g}}}' pets.txt</span></div></li><ul><li><div>若该行匹配到This is my3个关键词,则删除开头到my后面空格处(包括空格)</div></li></ul><li><div>sed 's/^[^ ]* \([]\)$/\1/g' email.txt</div></li><ul><li><div>输出邮箱地址(前提是符合规范的邮箱地址),否则输出一整行</div></li></ul><li><div><font style="color: rgb(255, 0, 0);">hold space和pattern space</font></div></li><ul><li><div><font>pattern sapce 是我们的<font style="color: rgb(77, 206, 29);">匹配空间</font>,决定我们最终输出的结果</font></div></li><li><div>hold space 相当于<font style="color: rgb(77, 206, 29);">临时空间</font></div></li><li><div>h命令是把匹配空间的数据覆盖到临时空间</div></li><li><div>H命令则是把匹配空间的数据添加到临时空间</div></li><li><div>g命令是把临时空间的数据覆盖到匹配空间</div></li><li><div>G命令则是把临时空间的数据添加到匹配空间</div></li></ul><li><div>sed 'H;g' t.txt</div></li><ul><li><div>输出结果</div></li><ul><li><div><br/></div><div>one</div><div><br/></div><div>one</div><div>two</div><div><br/></div><div>one</div><div>two</div><div>thress</div></li></ul><li><div>图形表示</div></li><ul><li><div><img src="sed_summarizes_files/Image.png" type="image/png" data-filename="Image.png"/></div></li></ul></ul><li><div>sed '1!G;h;$!<span style="color: unset; font-family: unset; font-size: unset;">d' t.txt </span></div></li><ul><li><div><span style="color: unset; font-family: unset; font-size: unset;">反序t.txt文件的行,1!表示第一行不执行,$!表示最后一行不执行</span></div></li><li><div>输出结果</div></li><ul><li><div>three</div><div>two</div><div>one</div></li></ul><li><div>图形表示</div></li><ul><li><div><img src="sed_summarizes_files/Image [1].png" type="image/png" data-filename="Image.png"/></div></li></ul></ul></ul></div><div><br/></div></span>
</div></body></html>