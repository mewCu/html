<html>
<head>
  <title>sed(Unix流编辑器)</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602498 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="666"/>
<h1>sed(Unix流编辑器)</h1>

<div>
<span><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><span style="font-family: unset; font-size: unset;">SED单行脚本快速参考（Unix 流编辑器） 2005年12月29日</span><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">英文标题：USEFUL ONE-LINE SCRIPTS FOR SED (Unix stream editor)</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">原标题：HANDY ONE-LINERS FOR SED (Unix stream editor)</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">整理：Eric Pement - 电邮：pemente[at]northpark[dot]edu 版本5.5</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">译者：Joe Hong - 电邮：hq00e[at]126[dot]com</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">在以下地址可找到本文档的最新（英文）版本：</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><a href="http://sed.sourceforge.net/sed1line.txt">http://sed.sourceforge.net/sed1line.txt</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><a href="http://www.pement.org/sed/sed1line.txt">http://www.pement.org/sed/sed1line.txt</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">其他语言版本：</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">中文 - <a href="http://sed.sourceforge.net/sed1line_zh-CN.html">http://sed.sourceforge.net/sed1line_zh-CN.html</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">捷克语 - <a href="http://sed.sourceforge.net/sed1line_cz.html">http://sed.sourceforge.net/sed1line_cz.html</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">荷语 - <a href="http://sed.sourceforge.net/sed1line_nl.html">http://sed.sourceforge.net/sed1line_nl.html</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">法语 - <a href="http://sed.sourceforge.net/sed1line_fr.html">http://sed.sourceforge.net/sed1line_fr.html</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">德语 - <a href="http://sed.sourceforge.net/sed1line_de.html">http://sed.sourceforge.net/sed1line_de.html</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">葡语 - <a href="http://sed.sourceforge.net/sed1line_pt-BR.html">http://sed.sourceforge.net/sed1line_pt-BR.html</a></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">文本间隔：</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">--------</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在每一行后面增加一空行</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed G</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将原来的所有空行删除并在每一行后面增加一空行。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 这样在输出的文本中每一行后面将有且只有一空行。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/^$/d;G'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在每一行后面增加两行空行</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 'G;G'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将第一个脚本所产生的所有空行删除（即删除所有偶数行）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 'n;d'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在匹配式样“regex”的行之前插入一空行</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/regex/{x;p;x;}'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在匹配式样“regex”的行之后插入一空行</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/regex/G'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在匹配式样“regex”的行之前和之后各插入一空行</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/regex/{x;p;x;G;}'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">编号：</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">--------</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># （tab，见本文末尾关于'\t'的用法的描述）而不是空格来对齐边缘。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed = filename | sed 'N;s/\n/\t/'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 对文件中的所有行编号（行号在左，文字右端对齐）。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed = filename | sed 'N; s/^/ /; s/ *\(.\{6,\}\)\n/\1 /'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 对文件中的所有行编号，但只显示非空白行的行号。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/./=' filename | sed '/./N; s/\n/ /'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 计算行数 （模拟 &quot;wc -l&quot;）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed -n '$='</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">文本转换和替代：</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">--------</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># Unix环境：转换DOS的新行符（CR/LF）为Unix格式。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/.$//' # 假设所有行以CR/LF结束</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/^M$//' # 在bash/tcsh中，将按Ctrl-M改为按Ctrl-V</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/\x0D$//' # ssed、gsed 3.02.80，及更高版本</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># Unix环境：转换Unix的新行符（LF）为DOS格式。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed &quot;s/$/`echo -e \\\r`/&quot; # 在ksh下所使用的命令</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/$'&quot;/`echo \\\r`/&quot; # 在bash下所使用的命令</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed &quot;s/$/`echo \\\r`/&quot; # 在zsh下所使用的命令</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/$/\r/' # gsed 3.02.80 及更高版本</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># DOS环境：转换Unix新行符（LF）为DOS格式。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed &quot;s/$//&quot; # 方法 1</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed -n p # 方法 2</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># DOS环境：转换DOS新行符（CR/LF）为Unix格式。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 下面的脚本只对UnxUtils sed 4.0.7 及更高版本有效。要识别UnxUtils版本的</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># sed可以通过其特有的“--text”选项。你可以使用帮助选项（“--help”）看</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 其中有无一个“--text”项以此来判断所使用的是否是UnxUtils版本。其它DOS</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed &quot;s/\r//&quot; infile &gt;outfile # UnxUtils sed v4.0.7 或更高版本</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">tr -d \r &lt;infile &gt;outfile # GNU tr 1.22 或更高版本</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将每一行前导的“空白字符”（空格，制表符）删除</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 使之左对齐</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/^[ \t]*//' # 见本文末尾关于'\t'用法的描述</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将每一行拖尾的“空白字符”（空格，制表符）删除</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/[ \t]*$//' # 见本文末尾关于'\t'用法的描述</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将每一行中的前导和拖尾的空白字符删除</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/^[ \t]*//;s/[ \t]*$//'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在每一行开头处插入5个空格（使全文向右移动5个字符的位置）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/^/ /'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 以79个字符为宽度，将所有文本右对齐</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed -e :a -e 's/^.\{1,78\}$/ &amp;/;ta' # 78个字符外加最后的一个空格</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 头和后头都填充了空格。 在方法2中，在居中文本的过程中只在文本的前面填充</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。</span><br/></div><div style="color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div>sed -e :a -e 's/^.\{1,77\}$/ &amp; /;ta' # 方法1</div><div>sed -e :a -e 's/^.\{1,77\}$/ &amp;/;ta' -e 's/\( *\)\1/\1/' # 方法2</div><div><br/></div><div># 在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”</div><div>sed 's/foo/bar/' # 只替换每一行中的第一个“foo”字串</div><div>sed 's/foo/bar/4' # 只替换每一行中的第四个“foo”字串</div><div>sed 's/foo/bar/g' # 将每一行中的所有“foo”都换成“bar”</div><div>sed 's/\(.*\)foo\(.*foo\)/\1bar\2/' # 替换倒数第二个“foo”</div><div>sed 's/\(.*\)foo/\1bar/' # 替换最后一个“foo”</div><div><br/></div><div># 只在行中出现字串“baz”的情况下将“foo”替换成“bar”</div><div>sed '/baz/s/foo/bar/g'</div><div><br/></div><div># 将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换</div><div>sed '/baz/!s/foo/bar/g'</div><div><br/></div><div># 不管是“scarlet”“ruby”还是“puce”，一律换成“red”</div><div>sed 's/scarlet/red/g;s/ruby/red/g;s/puce/red/g' #对多数的sed都有效</div><div>gsed 's/scarlet\|ruby\|puce/red/g' # 只对GNU sed有效</div><div><br/></div><div># 倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。</div><div># 由于某些原因，使用下面命令时HHsed v1.5会将文件中的空行删除</div><div>sed '1!G;h;$!d' # 方法1</div><div>sed -n '1!G;h;$p' # 方法2</div><div><br/></div><div># 将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）</div><div>sed '/\n/!G;s/\(.\)\(.*\n\)/&amp;\2\1/;//D;s/.//'</div><div><br/></div><div># 将每两行连接成一行（类似“paste”）</div><div>sed '$!N;s/\n/ /'</div><div><br/></div><div># 如果当前行以反斜杠“\”结束，则将下一行并到当前行末尾</div><div># 并去掉原来行尾的反斜杠</div><div>sed -e :a -e '/\\$/N; s/\\\n//; ta'</div><div><br/></div><div># 如果当前行以等号开头，将当前行并到上一行末尾</div><div># 并以单个空格代替原来行头的“=”</div><div>sed -e :a -e '$!N;s/\n=/ /;ta' -e 'P;D'</div><div><br/></div><div># 为数字字串增加逗号分隔符号，将“1234567”改为“1,234,567”</div><div>gsed ':a;s/\B[0-9]\{3\}\&gt;/,&amp;/;ta' # GNU sed</div><div>sed -e :a -e 's/\(.*[0-9]\)\([0-9]\{3\}\)/\1,\2/;ta' # 其他sed</div><div><br/></div><div># 为带有小数点和负号的数值增加逗号分隔符（GNU sed）</div><div>gsed -r ':a;s/(^|[^0-9.])([0-9]+)([0-9]{3})/\1\2,\3/g;ta'</div><div><br/></div><div># 在每5行后增加一空白行 （在第5，10，15，20，等行后增加一空白行）</div><div>gsed '0~5G' # 只对GNU sed有效</div><div>sed 'n;n;n;n;G;' # 其他sed</div><div><br/></div><div>选择性地显示特定行：</div><div>--------</div><div><br/></div><div># 显示文件中的前10行 （模拟“head”的行为）</div><div>sed 10q</div><div><br/></div><div># 显示文件中的第一行 （模拟“head -1”命令）</div><div>sed q</div></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示文件中的最后10行 （模拟“tail”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e :a -e '$q;N;11,$D;ba'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示文件中的最后2行（模拟“tail -2”命令）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '$!N;$!D'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示文件中的最后一行（模拟“tail -1”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '$!d' # 方法1</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '$p' # 方法2</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示文件中的倒数第二行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '$!{h;d;}' -e x # 当文件中只有一行时，输入空行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '1{$q;}' -e '$!{h;d;}' -e x # 当文件中只有一行时，显示该行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '1{$d;}' -e '$!{h;d;}' -e x # 当文件中只有一行时，不输出</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 只显示匹配正则表达式的行（模拟“grep”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/regexp/p' # 方法1</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/regexp/!d' # 方法2</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 只显示“不”匹配正则表达式的行（模拟“grep -v”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/regexp/!p' # 方法1，与前面的命令相对应</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/regexp/d' # 方法2，类似的语法</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/regexp/{g;1!p;};h'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/regexp/{n;p;}'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 在行的行号 （类似“grep -A1 -B1”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n -e '/regexp/{=;x;1!p;g;$!N;p;D;}' -e h</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“AAA”、“BBB”或“CCC”的行（任意次序）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/AAA/!d; /BBB/!d; /CCC/!d' # 字串的次序不影响结果</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“AAA”、“BBB”和“CCC”的行（固定次序）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/AAA.*BBB.*CCC/!d'</span></div></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“AAA”“BBB”或“CCC”的行 （模拟“egrep”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '/AAA/b' -e '/BBB/b' -e '/CCC/b' -e d # 多数sed</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">gsed '/AAA\|BBB\|CCC/!d' # 对GNU sed有效</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“AAA”的段落 （段落间以空行分隔）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># HHsed v1.5 必须在“x;”后加入“G;”，接下来的3个脚本都是这样</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '/./{H;$!d;}' -e 'x;/AAA/!d;'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“AAA”“BBB”和“CCC”三个字串的段落 （任意次序）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '/./{H;$!d;}' -e 'x;/AAA/!d;/BBB/!d;/CCC/!d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落 （任意次序）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '/./{H;$!d;}' -e 'x;/AAA/b' -e '/BBB/b' -e '/CCC/b' -e d</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">gsed '/./{H;$!d;};x;/AAA\|BBB\|CCC/b;d' # 只对GNU sed有效</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含65个或以上字符的行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/^.\{65\}/p'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示包含65个以下字符的行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/^.\{65\}/!p' # 方法1，与上面的脚本相对应</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/^.\{65\}/d' # 方法2，更简便一点的方法</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示部分文本——从包含正则表达式的行开始到最后一行结束</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/regexp/,$p'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示部分文本——指定行号范围（从第8至第12行，含8和12行）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '8,12p' # 方法1</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '8,12!d' # 方法2</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示第52行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '52p' # 方法1</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '52!d' # 方法2</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '52q;d' # 方法3, 处理大文件时更有效率</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 从第3行开始，每7行显示一次</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">gsed -n '3~7p' # 只对GNU sed有效</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '3,${p;n;n;n;n;n;n;}' # 其他sed</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示两个正则表达式之间的文本（包含）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/Iowa/,/Montana/p' # 区分大小写方式</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">选择性地删除特定行：</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">--------</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 显示通篇文档，除了两个正则表达式之间的内容</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/Iowa/,/Montana/d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中相邻的重复行（模拟“uniq”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 只保留重复行中的第一行，其他行删除</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '$!N; /^\(.*\)\n\1$/!P; D'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中的重复行，不管有无相邻。注意hold space所能支持的缓存</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 大小，或者使用GNU sed。</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n 'G; s/\n/&amp;&amp;/; /^\([ -~]*\n\).*\n\1/d; s/\n//; h; P'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除除重复行外的所有行（模拟“uniq -d”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '$!N; s/^\(.*\)\n\1$/\1/; t; D'</span></div></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中开头的10行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '1,10d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中的最后一行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '$d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中的最后两行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed 'N;$!P;$!D;$d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中的最后10行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e :a -e '$d;N;2,10ba' -e 'P;D' # 方法1</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n -e :a -e '1,10!{P;N;D;};N;ba' # 方法2</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除8的倍数行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">gsed '0~8d' # 只对GNU sed有效</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed 'n;n;n;n;n;n;n;d;' # 其他sed</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除匹配式样的行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/pattern/d' # 删除含pattern的行。当然pattern</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 可以换成任何有效的正则表达式</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件中的所有空行（与“grep '.' ”效果相同）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/^$/d' # 方法1</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/./!d' # 方法2</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># （模拟“cat -s”）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/./,/^$/!d' #方法1，删除文件顶部的空行，允许尾部保留一空行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/^$/N;/\n$/D' #方法2，允许顶部保留一空行，尾部不留空行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 只保留多个相邻空行的前两行。</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/^$/N;/\n$/N;//D'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件顶部的所有空行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/./,$!d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除文件尾部的所有空行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e :a -e '/^\n*$/{$d;N;ba' -e '}' # 对所有sed有效</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e :a -e '/^\n*$/N;/\n$/ba' # 同上，但只对 gsed 3.02.*有效</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 删除每个段落的最后一行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '/^$/{p;h;};/./{x;/./p;}'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">特殊应用：</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">--------</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 移除手册页（man page）中的nroff标记。在Unix System V或bash shell下使</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 用'echo'命令时可能需要加上 -e 选项。</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed &quot;s/.`echo \\\b`//g&quot; # 外层的双括号是必须的（Unix环境）</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed 's/.^H//g' # 在bash或tcsh中, 按 Ctrl-V 再按 Ctrl-H</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed 's/.\x08//g' # sed 1.5，GNU sed，ssed所使用的十六进制的表示方法</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 提取新闻组或 e-mail 的邮件头</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/^$/q' # 删除第一行空行后的所有内容</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 提取新闻组或 e-mail 的正文部分</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '1,/^$/d' # 删除第一行空行之前的所有内容</span></div></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"># 从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject:”字样</span></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/^Subject: */!d; s///;q'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 从邮件头获得回复地址</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/^Reply-To:/q; /^From:/h; /./d;g;q'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 地址的部分剃除。（见上一脚本）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/ *(.*)//; s/&gt;.*//; s/.*[:&lt;] *//'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 在每一行开头加上一个尖括号和空格（引用信息）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/^/&gt; /'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将每一行开头处的尖括号和空格删除（解除引用）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed 's/^&gt; //'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 移除大部分的HTML标签（包括跨行标签）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed -e :a -e 's/&lt;[^&gt;]*&gt;//g;/&lt;/N;//ba'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul Dhesi的一</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 个脚本修改而来。）</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/^end/,/^begin/d' file1 file2 ... fileX | uudecode # vers. 1</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/^end/,/^begin/d' &quot;$@&quot; | uudecode # vers. 2</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU sed使用</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 字元“\v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 用其他未在文件中使用的字符来代替它。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '/./{H;d;};x;s/\n/={NL}=/g' file | sort | sed '1s/={NL}=//;s/={NL}=/\n/g'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">gsed '/./{H;d};x;y/\n/\v/' file | sort | sed '1s/\v//;y/\v/\n/'</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 分别压缩每个.TXT文件，压缩后删除原来的文件并将压缩后的.ZIP文件</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir /b”</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"># 显示不带路径的文件名）。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">echo @echo off &gt;zipup.bat</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">dir /b *.txt | sed &quot;s/^\(.*\)\.TXT/pkzip -mo \1 \1.TXT/&quot; &gt;&gt;zipup.bat</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">当读入第一行输入后，sed对其应用所有的命令，然后将结果输出。接着再读入第二</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">行输入，对其应用所有的命令……并重复这个过程。上一个例子中sed由标准输入设</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">备（即命令解释器，通常是以管道输入的形式）获得输入。在命令行给出一个或多</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">个文件名作为参数时，这些文件取代标准输入设备成为sed的输入。sed的输出将被</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">送到标准输出（显示器）。因此：</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">cat filename | sed '10q' # 使用管道输入</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '10q' filename # 同样效果，但不使用管道输入</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">sed '10q' filename &gt; newfile # 将输出转移（重定向）到磁盘上</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">要了解sed命令的使用说明，包括如何通过脚本文件（而非从命令行）来使用这些命</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;">令，请参阅《sed &amp; awk》第二版，作者Dale Dougherty和Arnold Robbins</div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">（O'Reilly，1997；<a href="http://www.ora.com/">http://www.ora.com</a>），《UNIX Text Processing》，作者</span><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div style="color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div>Dale Dougherty和Tim O'Reilly（Hayden Books，1987）或者是Mike Arst写的教</div><div>程——压缩包的名称是“U-SEDIT2.ZIP”（在许多站点上都找得到）。要发掘sed</div><div>的潜力，则必须对“正则表达式”有足够的理解。正则表达式的资料可以看</div><div>《Mastering Regular Expressions》作者Jeffrey Friedl（O'reilly 1997）。</div><div>Unix系统所提供的手册页（“man”）也会有所帮助（试一下这些命令</div><div>“man sed”、“man regexp”，或者看“man ed”中关于正则表达式的部分），但</div><div>手册提供的信息比较“抽象”——这也是它一直为人所诟病的。不过，它本来就不</div><div>是用来教初学者如何使用sed或正则表达式的教材，而只是为那些熟悉这些工具的人</div><div>提供的一些文本参考。</div><div><br/></div><div>括号语法：前面的例子对sed命令基本上都使用单引号（'...'）而非双引号</div><div>（&quot;...&quot;）这是因为sed通常是在Unix平台上使用。单引号下，Unix的shell（命令</div><div>解释器）不会对美元符（$）和后引号（`...`）进行解释和执行。而在双引号下</div><div>美元符会被展开为变量或参数的值，后引号中的命令被执行并以输出的结果代替</div><div>后引号中的内容。而在“csh”及其衍生的shell中使用感叹号（!）时需要在其前</div><div>面加上转义用的反斜杠（就像这样：\!）以保证上面所使用的例子能正常运行</div><div>（包括使用单引号的情况下）。DOS版本的Sed则一律使用双引号（&quot;...&quot;）而不是</div><div>引号来圈起命令。</div><div><br/></div><div>'\t'的用法：为了使本文保持行文简洁，我们在脚本中使用'\t'来表示一个制表</div><div>符。但是现在大部分版本的sed还不能识别'\t'的简写方式，因此当在命令行中为</div><div>脚本输入制表符时，你应该直接按TAB键来输入制表符而不是输入'\t'。下列的工</div><div>具软件都支持'\t'做为一个正则表达式的字元来表示制表符：awk、perl、HHsed、</div><div>sedmod以及GNU sed v3.02.80。</div><div><br/></div><div>不同版本的SED：不同的版本间的sed会有些不同之处，可以想象它们之间在语法上</div><div>会有差异。具体而言，它们中大部分不支持在编辑命令中间使用标签（:name）或分</div><div>支命令（b,t），除非是放在那些的末尾。这篇文档中我们尽量选用了可移植性较高</div><div>的语法，以使大多数版本的sed的用户都能使用这些脚本。不过GNU版本的sed允许使</div><div>用更简洁的语法。想像一下当读者看到一个很长的命令时的心情：</div></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -e '/AAA/b' -e '/BBB/b' -e '/CCC/b' -e d</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">好消息是GNU sed能让命令更紧凑：</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/AAA/b;/BBB/b;/CCC/b;d' # 甚至可以写成</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/AAA\|BBB\|CCC/b;d'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">此外，请注意虽然许多版本的sed接受象“/one/ s/RE1/RE2/”这种在's'前带有空</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">格的命令，但这些版本中有些却不接受这样的命令:“/one/! s/RE1/RE2/”。这时</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">只需要把中间的空格去掉就行了。</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">速度优化：当由于某种原因（比如输入文件较大、处理器或硬盘较慢等）需要提高</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">命令执行速度时，可以考虑在替换命令（“s/.../.../”）前面加上地址表达式来</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">提高速度。举例来说：</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed 's/foo/bar/g' filename # 标准替换命令</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/foo/ s/foo/bar/g' filename # 速度更快</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed '/foo/ s//bar/g' filename # 简写形式</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">当只需要显示文件的前面的部分或需要删除后面的内容时，可以在脚本中使用“q”</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">命令（退出命令）。在处理大的文件时，这会节省大量时间。因此：</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '45,50p' filename # 显示第45到50行</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">sed -n '51q;45,50p' filename # 一样，但快得多</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">如果你有其他的单行脚本想与大家分享或者你发现了本文档中错误的地方，请发电</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">子邮件给本文档的作者（Eric Pement）。邮件中请记得提供你所使用的sed版本、</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">该sed所运行的操作系统及对问题的适当描述。本文所指的单行脚本指命令行的长</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">度在65个字符或65个以下的sed脚本〔译注1〕。本文档的各种脚本是由以下所列作</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">者所写或提供：</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Al Aab # 建立了“seders”邮件列表</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Edgar Allen # 许多方面</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Yiorgos Adamopoulos # 许多方面</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Dale Dougherty # 《sed &amp; awk》作者</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Carlos Duarte # 《do it with sed》作者</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Eric Pement # 本文档的作者</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Ken Pizzini # GNU sed v3.02 的作者</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">S.G. Ravenhall # 去html标签脚本</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">Greg Ubben # 有诸多贡献并提供了许多帮助</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">-------------------------------------------------------------------------</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">译注1：大部分情况下，sed脚本无论多长都能写成单行的形式（通过`-e'选项和`;'</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">号）——只要命令解释器支持，所以这里说的单行脚本除了能写成一行还对长度有</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">所限制。因为这些单行脚本的意义不在于它们是以单行的形式出现。而是让用户能</span></div><div><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">方便地在命令行中使用这些紧凑的脚本才是其意义所在。</span></div></div><div style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;widows:2;word-spacing:0px;"><br/><span style="color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;"><br/></span></div></span>
</div></body></html>